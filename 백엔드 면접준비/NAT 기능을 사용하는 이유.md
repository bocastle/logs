# NAT 기능을 사용하는 이유

## 공인 IP와 사설 IP

- **공인 IP (Public IP)**: 인터넷에서 고유하게 식별 가능한 IP 주소
- **사설 IP (Private IP)**: 내부 네트워크에서만 유효한 IP 주소 (예: 192.168.x.x)

사설 IP만으로는 외부 인터넷과 직접 통신할 수 없습니다.  
이를 해결하기 위해 **NAT (Network Address Translation)** 기능을 사용합니다.

---

## NAT란?

> NAT는 내부(사설) IP 주소를 외부(공인) IP 주소로 변환하여 외부 네트워크와 통신 가능하게 하는 기술입니다.

### 동작 방식 요약

1. 사설 네트워크의 클라이언트가 외부 서버로 패킷 전송
2. 라우터의 NAT 기능이 사설 IP → 공인 IP로 변환
3. 외부 서버가 공인 IP로 응답
4. NAT가 공인 IP → 사설 IP로 재변환하여 내부 클라이언트로 전달

---

## NAT 변환 테이블

| Private IP   | Private Port | Public IP | Public Port |
| ------------ | ------------ | --------- | ----------- |
| 192.168.10.2 | 8000         | 1.2.3.4   | 8001        |
| 192.168.10.3 | 8000         | 1.2.3.4   | 8002        |

→ 포트를 이용한 구분을 통해 **여러 사설 IP를 하나의 공인 IP로 매핑** 가능

---

## NAPT (Network Address Port Translation)

- NAT의 확장 개념
- **IP 주소 + 포트 번호** 기반으로 변환
- 여러 사설 호스트가 하나의 공인 IP로 동시에 통신 가능

```plaintext
사설 -> 공인 변환:
192.168.10.2:8000 → 1.2.3.4:8001

공인 -> 사설 변환:
1.2.3.4:8001 → 192.168.10.2:8000
```

---

## NAT 사용 이유 요약

| 항목            | 설명                                     |
| --------------- | ---------------------------------------- |
| 주소 부족 해결  | IPv4 주소 부족 문제 해결 (사설 IP 활용)  |
| 보안성 증가     | 외부에서 사설 네트워크 접근 어려움       |
| 네트워크 유연성 | 내부 IP 구조 변경에도 외부에는 영향 없음 |

---

## 예시 시나리오 (Pseudo-code)

```js
// 내부 네트워크에서 외부 API 호출 예시 (브라우저 → NAT → 서버)
fetch("https://external-api.com/data")
  .then((res) => res.json())
  .then((data) => {
    console.log("데이터 수신 완료:", data);
  });
```

> 실제 이 요청은 사설 IP (예: 192.168.10.2)가 아닌 공인 IP (예: 1.2.3.4)로 전송됩니다.
