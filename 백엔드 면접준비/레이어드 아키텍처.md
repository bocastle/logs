# 레이어드 아키텍처 (Layered Architecture)

## 정의

레이어드 아키텍처(Layered Architecture)란 소프트웨어를 **관심사별로 여러 계층으로 나누어 수직적으로 배열한 것**을 의미한다.  
여기서 **관심사**란 유사한 책임들을 의미하며, 예를 들어 **데이터베이스 접근과 관련된 책임**들을 하나의 관심사로 볼 수 있다.

---

## 대표적인 레이어 구성

일반적으로 3가지 레이어가 존재한다. (프로젝트 상황에 따라 다를 수 있음)

1. **표현 계층 (Presentation Layer)**

   - 사용자 입력을 처리하기 위해 존재한다.

2. **도메인 계층 (Domain Layer)**

   - 비즈니스와 관련된 로직을 수행하기 위해 존재한다.

3. **데이터 소스 계층 (Data Source Layer)**
   - 데이터베이스 접근 및 데이터 조작과 관련된 작업을 수행한다.

---

## 장점

- 특정 레이어만 독립적으로 확장하거나 변경 가능
- 특정 레이어만 별도로 테스트 환경을 구축하여 테스트 가능
- 책임 분리가 명확해져 유지보수성이 향상됨

---

## 싱크홀 안티 패턴 (Architecture Sinkhole Anti-Pattern)

### 정의

- 요청은 보통 상위 레이어(표현 계층) → 중간 레이어(도메인 계층) → 하위 레이어(데이터 소스 계층)로 전달된다.
- 그러나 **중간 레이어가 아무 일도 하지 않고 단순히 요청을 전달만 하는 경우**가 발생할 수 있다.
- 이러한 현상을 **싱크홀 안티 패턴**이라고 한다.

### 문제점

- 불필요한 요청 전달 발생
- 무의미한 중간 코드 작성
- CPU 및 메모리 자원 낭비

---

## 코드 예시

```java
@Service
public class OrderService {

  private OrderDao orderDao;

  // 아무 일도 수행하지 않음
  public OrderResponse getOrder(Long orderId) {
      return orderDao.getOrderById(orderId);
  }
}
```

## 트레이드오프

- 싱크홀 안티 패턴을 **무조건 피해야 하는 것은 아님**
- 상위 레이어가 직접 하위 레이어에 접근하면 **일관성이 약해지고 추가적인 소통과 문서가 필요**할 수 있음
- 따라서, 프로젝트와 팀의 상황에 맞게 **트레이드오프를 고려하여 규칙을 설정**하는 것이 중요하다.

---

## 결론

레이어드 아키텍처는 **관심사 분리**, **확장성**, **테스트 용이성**을 제공하지만,  
**싱크홀 안티 패턴** 같은 불필요한 중간 계층 문제를 유발할 수 있다.  
따라서 팀의 상황에 맞게 **레이어 설계를 최적화**하는 것이 핵심이다.
