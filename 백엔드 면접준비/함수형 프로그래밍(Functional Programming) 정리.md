# 함수형 프로그래밍(Functional Programming) 정리

## 1) 함수형 프로그래밍이란?

함수형 프로그래밍(FP)은 **함수의 합성**과 **부수 효과(side effect)의 통제**를 중심으로 프로그램을 구성하는 패러다임입니다.

- 객체지향(OOP): “움직이는 부분(변화)”을 **캡슐화**해서 복잡도를 낮춤
- 함수형(FP): “움직이는 부분(변화)”을 **최소화/격리**해서 예측 가능성을 높임  
  둘은 상충 개념이 아니라, 실무에서는 **혼합(멀티 패러다임)**으로 함께 쓰이는 경우가 많습니다.

---

## 2) 부수 효과(Side Effect)

부수 효과는 함수가 값을 반환하는 것 외에 **외부 세계에 영향을 주는 행위**를 말합니다.

- 외부 상태 변경(전역 변수/필드 변경, 컬렉션 mutate)
- I/O(파일/네트워크/콘솔 출력)
- 시간 의존(NOW(), currentTimeMillis), 랜덤(random)
- 예외 던짐(관점에 따라 side effect로 보기도 함)

부수 효과가 많아지면:

- 테스트가 어려워지고(환경 세팅 필요)
- 동작을 예측하기 어려워지며(실행 순서/타이밍 영향)
- 합성이 어려워집니다(함수 조합 시 부작용 전파)

---

## 3) 순수 함수(Pure Function)

순수 함수는 다음 성질을 만족합니다.

1. **동일 입력 → 항상 동일 출력**(결정적, deterministic)
2. **부수 효과가 없음**(외부 상태를 바꾸지 않음)

순수 함수의 장점:

- 테스트가 쉽고
- 캐싱/메모이제이션이 가능하며
- 병렬화/동시성에 유리하고
- 합성이 잘 됩니다.

> 참고: “순수”는 엄격한 수학적 의미에 가깝고, 실무에서는 **부수 효과를 최소화하고 경계를 명확히** 하는 방향으로 적용하는 경우가 많습니다.

---

## 4) 함수 합성(Function Composition)

함수 합성은 **한 함수의 출력 타입이 다른 함수의 입력 타입과 맞을 때** 두 함수를 연결해 새로운 함수를 만드는 것입니다.

- 수학적 표기: `(f ∘ g)(x) = f(g(x))`
- 프로그래밍: `f(g(x))`

타입 관점에서 보면:

- `g: A -> B`
- `f: B -> C`
- 합성 결과 `f ∘ g: A -> C`

순수 함수끼리 합성하면 결과도 예측 가능하므로, FP에서 합성은 매우 강력한 도구입니다.

---

## 5) FP에서 자주 같이 언급되는 개념들

### (1) 불변성(Immutable)

값을 “바꾸는” 대신 **새 값을 만들어** 사용합니다.

- 버그 감소(공유 상태 변경 문제 완화)
- 스냅샷/롤백/시간여행 디버깅 등에 유리
- 동시성에서 안전

### (2) 참조 투명성(Referential Transparency)

어떤 표현식을 그 값으로 치환해도 프로그램 의미가 변하지 않는 성질입니다.  
순수 함수는 일반적으로 참조 투명성을 만족합니다.

### (3) 고차 함수(Higher-Order Function)

함수를 인자로 받거나 함수를 반환하는 함수입니다.

- `map`, `filter`, `reduce`, `fold` 등

---

## 6) 예시: “부수 효과가 있는 합” vs “합성 가능한 합”

### 부수 효과 중심(합성에 불리한 스타일)

아래 코드는 특정 요구(1~100 합)에 고정되어 있고, 로직 재사용/합성이 어렵습니다.

```java
int sum() {
    int sum = 0;
    for(int i = 1; i <= 100; i++) {
        sum += i;
    }
    return sum;
}
```

### 합성 가능한 스타일(추상화 + 순수 함수 지향)

- “범위 만들기(range)”
- “누적 연산(loop/fold)”를 **함수로 추상화**
- 덧셈/곱셈을 **함수 인자**로 주입

아래 구조는 같은 골격으로 “합”, “팩토리얼” 등을 만들어낼 수 있습니다.

```java
private int sum() {
    return loop((a, b) -> a + b, 0, range(1, 100));
}

private int factorial(int n) {
    return loop((a, b) -> a * b, 1, range(1, n));
}
```

핵심은 “무엇을 할지(연산)”를 함수로 전달하고, 공통된 반복/누적 로직을 재사용한다는 점입니다.

> 자바에서는 Stream의 `reduce`, 컬렉션의 불변 컬렉션, Optional 등을 조합해 FP 스타일을 더 자연스럽게 구성할 수도 있습니다.

---

## 7) 실무 적용 팁(백엔드 관점)

- **도메인 로직**은 가능한 한 순수 함수에 가깝게(입력→출력) 만들고
- **I/O(DB, 외부 API, 메시징)** 는 경계(Repository/Adapter)로 밀어내어 격리합니다.
- “상태 변경”은 필요할 때만, 좁은 범위에서 명시적으로 수행합니다.

---

## 한 줄 요약

함수형 프로그래밍은 **부수 효과를 통제하고, 순수 함수 합성으로 복잡도를 낮추는 방식**입니다.
