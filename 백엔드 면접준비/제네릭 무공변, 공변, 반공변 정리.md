# 제네릭 무공변, 공변, 반공변 정리

## 🔹 무공변 (Invariant)

```java
public class Animal {}
public class Cat extends Animal {}

List<Animal> animals = new ArrayList<Cat>(); // ❌ 컴파일 에러
List<Cat> cats = new ArrayList<Animal>(); // ❌ 컴파일 에러
```

자바의 제네릭은 기본적으로 **무공변**입니다.  
즉, `List<Cat>`은 `List<Animal>`의 하위 타입이 아닙니다.

- 타입 안전성은 보장됨
- 하지만 유연성이 부족

---

## 🔹 공변 (Covariant)

```java
public void produce(List<? extends Animal> animals) {
    for (Animal a : animals) {
        System.out.println(a);
    }
}
```

- `<? extends T>`는 **읽기 전용**
- 하위 타입도 허용
- 쓰기는 `null`만 가능
- 예: 생산자 역할

---

## 🔹 반공변 (Contravariant)

```java
public void consume(List<? super Cat> cats) {
    cats.add(new Cat());
}
```

- `<? super T>`는 **쓰기 전용**
- 상위 타입도 허용
- 읽기는 Object 타입으로만 가능
- 예: 소비자 역할

---

## ✅ PECS 원칙

**PECS: Producer Extends, Consumer Super**

| 역할   | 와일드카드    |
| ------ | ------------- |
| 생산자 | `? extends T` |
| 소비자 | `? super T`   |

---

## ❓ `<?>` vs `<Object>`

| 항목           | `<?>`                       | `<Object>`                     |
| -------------- | --------------------------- | ------------------------------ |
| 타입 수용      | 모든 타입 허용              | `Object` 타입만 허용           |
| 쓰기 가능 여부 | `null`만 가능               | 모든 객체 추가 가능            |
| 읽기 가능 여부 | 읽기 전용 (타입 알 수 없음) | 읽기/쓰기 모두 가능 (`Object`) |
