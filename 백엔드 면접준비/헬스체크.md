# 헬스체크 (Health Check)

## 정의

헬스체크(Health Check)란 현재 서버의 상태가 정상인지 파악하는 것을 의미한다.  
일반적으로 **API 엔드포인트 호출** 혹은 **특정 포트로 TCP 연결 시도** 같은 방식을 사용하며,  
스프링에서는 **Spring Actuator**를 활용하여 헬스체크 기능을 제공할 수 있다.

---

## 필요성

헬스체크 기능이 있으면 다음과 같은 이점이 있다.

- 최신 코드 배포 시 신규 배포가 정상적으로 이루어졌는지 확인 가능
- 장애 발생 여부를 빠르게 감지하고 대응 가능
- 서비스 안정성과 가용성을 보장

---

## 장애 대응 예시

로드 밸런서와 서버 2대(A, B)가 존재한다고 가정한다.

1. 로드 밸런서는 A, B 서버로 트래픽을 분산한다.
2. A 서버 헬스체크가 **비정상**으로 판별되면, 로드 밸런서는 **A 서버를 제외**하고 B 서버로만 요청을 전달한다.
3. 이를 통해 사용자 요청이 장애 서버로 전달되지 않으며, 정상 서비스가 지속된다.

---

## 비정상 서버의 원인

서버가 헬스체크에서 비정상으로 판단되는 이유는 다음과 같다.

- CPU, 메모리, I/O 자원이 고갈됨
- 내부 애플리케이션 오류 발생
- 네트워크 장애 혹은 DB 연결 실패

---

## 헬스체크 미제공 시 문제점

- 정상 서버가 있음에도 불구하고 **비정상 서버에 요청이 전달**됨
- 사용자가 오류 응답을 받을 가능성 증가
- 클라이언트 재시도로 인해 전체 트래픽이 불필요하게 증가
- 장애 전파 위험 확대

---

## 결론

헬스체크는 서버의 정상 여부를 판단하고, 로드 밸런서 및 오케스트레이션 툴(Kubernetes 등)이 올바르게 트래픽을 분산하도록 돕는다.  
이를 통해 **서비스 안정성**, **장애 대응 속도**, **사용자 경험**을 모두 향상시킬 수 있다.
