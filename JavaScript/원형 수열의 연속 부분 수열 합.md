# 원형 수열의 연속 부분 수열 합

## 문제 설명

철호는 원형 수열에서 연속하는 부분 수열의 합으로 만들 수 있는 고유한 수의 개수를 구하려고 합니다. 원형 수열은 처음과 끝이 연결된 형태로, 예를 들어 `[7, 9, 1, 1, 4]`는 다음과 같은 연속 부분 수열을 가집니다:

- 길이 1: `[7], [9], [1], [1], [4]`
- 길이 2: `[7,9], [9,1], [1,1], [1,4], [4,7]`
- 등등...

주어진 배열 `elements`에서 고유한 합의 개수를 반환하는 자바스크립트 함수를 작성합니다.

## 제한사항

- `3 ≤ elements.length ≤ 1,000`
- `1 ≤ elements[i] ≤ 1,000`

### 기본 풀이

모든 길이(1부터 `n`)와 시작 인덱스를 순회하며 연속 부분 수열의 합을 계산하고, `Set`을 사용해 중복을 제거합니다.

```javascript
function solution(elements) {
  const n = elements.length;
  const result = new Set(); // 중복 없는 합 저장

  // 길이 1부터 n까지
  for (let length = 1; length <= n; length++) {
    // 시작 인덱스 순회
    for (let start = 0; start < n; start++) {
      let subSum = 0;
      // 길이만큼 원소 더하기 (원형이므로 % n)
      for (let i = 0; i < length; i++) {
        subSum += elements[(start + i) % n];
      }
      result.add(subSum);
    }
  }

  return result.size; // 고유한 합의 개수
}
```

### 최적화된 풀이 (누적 합)

누적 합 배열을 사용해 합 계산을 최적화합니다. 배열을 두 배로 늘려 원형 수열을 처리합니다.

```javascript
function solution(elements) {
  const n = elements.length;
  const result = new Set();
  const extended = elements.concat(elements); // 배열 두 배 확장

  // 누적 합 배열 생성
  const prefixSum = [0];
  for (let i = 0; i < 2 * n; i++) {
    prefixSum.push(prefixSum[i] + extended[i]);
  }

  // 길이 1부터 n까지
  for (let length = 1; length <= n; length++) {
    for (let start = 0; start < n; start++) {
      // prefixSum[start + length] - prefixSum[start]로 합 계산
      result.add(prefixSum[start + length] - prefixSum[start]);
    }
  }

  return result.size;
}
```

## 예제

**입력**: `elements = [7, 9, 1, 1, 4]`  
**출력**: `18`  
**설명**:

- 길이 1: `{1, 4, 7, 9}`
- 길이 2: `{16, 10, 2, 5, 11}`
- 길이 3: `{17, 11, 6, 12, 20}`
- 길이 4: `{18, 15, 13, 21}`
- 길이 5: `{22}`
- 중복 제거 후: `{1, 2, 4, 5, 6, 7, 9, 10, 11, 12, 13, 15, 16, 17, 18, 20, 21, 22}` (18개)

## 시간 복잡도

- **기본 풀이**: \( O(n^3) \) (삼중 루프: 길이, 시작 인덱스, 합 계산)
- **최적화 풀이**: \( O(n^2) \) (누적 합으로 합 계산을 \( O(1) \)로 줄임)
- **공간 복잡도**: \( O(n^2) \) (Set과 누적 합 배열)

## 추가 노트

- `Set`은 중복 제거에 효율적이며, 자바스크립트에서 쉽게 사용 가능.
- 원형 수열은 `(start + i) % n` 또는 배열 확장으로 처리.
- 성능 최적화가 필요하면 누적 합 풀이 추천.
