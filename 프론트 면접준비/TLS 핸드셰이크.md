# TLS 핸드셰이크 (TLS Handshake)

## 정의

TLS 핸드셰이크는 브라우저와 서버가 **TLS 프로토콜을 통해 암호화된 통신을 시작하기 전**,  
안전하게 연결을 설정하는 절차이다.  
즉, **보안 채널을 수립하기 위한 초기 협상 과정**이라고 할 수 있다.

---

## 절차

### 1. Client Hello

- 브라우저가 서버에 `Client Hello` 메시지를 전송한다.
- 포함된 정보:
  - 지원 가능한 **TLS 버전**
  - 사용할 수 있는 **암호화 알고리즘 목록**
  - **세션 ID**
  - **Client Random** (난수)

---

### 2. Server Hello

- 서버는 `Server Hello`로 응답한다.
- 포함된 정보:
  - 서버가 선택한 **암호화 방식**
  - **Server Random** (난수)
  - **디지털 인증서** (서버 공개키 + CA 서명)

---

### 3. 서버 인증 및 키 교환

- 브라우저는 서버가 보낸 인증서를 검증한다.
  - CA 서명을 확인하여 서버의 신원을 보장
- 검증 완료 후, 브라우저는 서버의 **공개키**로 `Pre-Master Secret` 값을 암호화하여 전송
- 서버는 자신의 **개인키**로 이를 복호화하여 `Pre-Master Secret`을 복원

---

### 4. 대칭키 생성

- 클라이언트와 서버는 다음 3가지 값을 기반으로 동일한 대칭키를 생성한다.

  1. Client Random
  2. Server Random
  3. Pre-Master Secret

- 이 대칭키는 이후 실제 데이터 암호화/복호화에 사용된다.

---

### 5. Finished 메시지 교환

- 클라이언트와 서버는 **대칭키로 암호화된 Finished 메시지**를 교환한다.
- 서로 암호화/복호화가 정상적으로 수행됨을 확인한다.

---

## 결론

TLS 핸드셰이크는

1. **서버 신원 검증** (인증서 확인)
2. **대칭키 생성** (효율적인 암호화 통신)
3. **보안 채널 수립** (HTTPS 기반 안전한 데이터 전송)

을 보장하는 핵심 절차이다.  
이를 통해 사용자는 안전하게 HTTPS 통신을 사용할 수 있다.
