# 불변성(Immutability) 정리

## 핵심 요약

- **불변성**은 데이터가 생성된 이후 **상태를 변경할 수 없는 성질**입니다.
- 참조 타입(객체/배열)은 기본적으로 가변적이므로, 불변성을 유지하려면 **직접 수정 대신 새 객체를 생성**합니다.
- 불변성은 변경 추적을 쉽게 해 **예측 가능성, 안정성, 유지보수성**을 높입니다.

## 불변성(Immutability)이란 무엇인가요?

불변성이란 데이터가 최초 생성된 이후 그 상태를 변경할 수 없는 성질을 의미합니다. 프로그래밍에서 불변성을 지키는 것은 예측 가능하고 안정적인 코드를 작성하는 데 중요합니다.

객체와 배열 같은 **참조 타입**은 기본적으로 가변적입니다. 예를 들어, 객체의 프로퍼티 값을 직접 변경할 수 있습니다. 여기서 만약 불변성을 유지하고 싶다면, 객체의 프로퍼티를 직접 변경하지 않고 **새로운 객체를 생성**하는 방식을 사용해야 합니다.

### 예시

```js
const person = { name: "Alice", age: 25 };

// 불변성 미유지
person.age = 26;

// 불변성 유지
const updatedPerson = { ...person, age: 26 };
```

불변성을 유지하기 위해 다음과 같은 내장 기능을 활용할 수 있습니다.

```text
- 스프레드 연산자
- Object.assign()
- Object.freeze()
```

또는 Immutable js와 같은 도구를 활용할 수 있습니다.

## 불변성을 유지하면 성능 면에서 불리할 것 같은데, 왜 불변성을 유지하나요?

말씀해주신 대로 업데이트마다 새로운 객체를 생성해야 하므로 메모리 비용이 약간 증가할 수 있습니다. 하지만 이 비용은 일반적으로 무시할만한 수준이며, 불변성 유지는 장기적으로 유지보수성과 안정성을 크게 향상시킨다는 장점이 있습니다.

불변성은 데이터의 변경 흐름을 추적하기 쉽게 만들어줍니다.

- 가변 데이터를 이곳저곳에서 수정해가며 사용하면 데이터가 언제, 어디서 변경되었는지 파악하기 어렵습니다.
- 반면, 불변성을 지키면 데이터 변경이 항상 새로운 객체 생성을 통해 이루어지므로 변경 지점을 명확하게 추적할 수 있습니다.

## 장점

- 데이터 변경 지점을 명확히 추적할 수 있어 디버깅과 유지보수가 쉬워집니다.
- 예측 가능한 상태 변화를 통해 코드의 안정성과 신뢰도가 높아집니다.

## 단점

- 업데이트마다 새 객체를 생성하므로 메모리/할당 비용이 증가할 수 있습니다.

## 주의사항 및 실무 팁

- 참조 타입을 직접 변경(mutate)하는 코드가 섞이면 변경 추적이 어려워질 수 있으니, 팀 규칙으로 “직접 수정 금지” 같은 가이드를 두는 것이 도움이 됩니다.
- 얕은 복사(스프레드/`Object.assign`)는 중첩 구조에서 내부 객체까지 자동으로 복사하지 않으므로, 중첩된 데이터 구조에서는 의도한 수준의 복사가 이뤄지는지 주의합니다.
- `Object.freeze()`는 런타임에서 변경을 막는 도구이지만, 기본 사용만으로는 깊은(Deep) 불변을 보장하지 않을 수 있으므로 사용 목적을 명확히 합니다.
