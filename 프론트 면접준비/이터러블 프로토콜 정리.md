# 이터러블 프로토콜 정리

## 문제

자바스크립트에서 배열, 문자열, Set, Map 등 다양한 자료구조가 존재하는데, 각 자료구조를 순회하려면 제각각의 방법을 사용해야 하는 문제가 발생할 수 있다. 개발자가 매번 다른 순회 방식을 학습하거나 구현해야 한다면 비효율적이다.

## 특징

- 이터러블 프로토콜은 **데이터를 순차적으로 탐색할 수 있도록 정의된 규칙(프로토콜)**이다.
- 자바스크립트의 **for...of 문**, **스프레드 연산자** 등 반복 관련 문법은 이 프로토콜을 기반으로 동작한다.
- `Symbol.iterator` 메서드가 정의된 객체를 **이터러블 객체(iterable object)**라 한다.
- `Symbol.iterator`는 반드시 **이터레이터 객체(iterator object)**를 반환해야 한다.
- 이터레이터 객체는 `next()` 메서드를 가지며, `{ value, done }` 형태의 객체를 반환한다.
  - `value`: 현재 반환되는 값
  - `done`: 순회 완료 여부(boolean)

## 장점

- 자료구조마다 다른 순회 방법을 고민하지 않고, **일관된 방식**으로 데이터를 순회할 수 있다.
- 언어 차원에서 제공하는 반복문 및 문법과 호환된다.
- 커스텀 이터러블을 만들어 확장할 수 있다.

## 단점

- `Symbol.iterator`와 `next()` 규약을 직접 구현해야 하므로 코드가 다소 장황해질 수 있다.
- 단순한 순회를 위해서는 배열이나 기본 제공 이터러블을 활용하는 편이 더 직관적이다.

## 최적화

- 이미 이터러블을 지원하는 자료구조를 적극 활용한다.
- 필요할 때만 커스텀 이터러블을 구현하여, 코드 복잡도를 줄인다.

## 코드 예시

```js
const customIterable = {
  data: [1, 2, 3],
  [Symbol.iterator]() {
    let index = 0;
    return {
      next: () => {
        return index < this.data.length
          ? { value: this.data[index++], done: false }
          : { done: true };
      },
    };
  },
};

for (const item of customIterable) {
  console.log(item); // 1, 2, 3 차례로 출력
}
```

## 결론

이터러블 프로토콜의 핵심 목적은 **"순회할 수 있는 객체의 공통 인터페이스를 정의하여, 일관된 방식으로 데이터를 탐색할 수 있게 하는 것"**이다.  
이를 통해 개발자는 자료구조마다 다른 순회 방법을 고민하지 않고, 보다 일관적이고 직관적인 방식으로 데이터를 다룰 수 있다.
