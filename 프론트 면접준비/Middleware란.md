# âš™ï¸ Middlewareë€?

## ğŸ’¡ ê°œìš”

**Middleware(ë¯¸ë“¤ì›¨ì–´)**ëŠ”  
ìš”ì²­(Request)ê³¼ ì‘ë‹µ(Response) ì‚¬ì´ì—ì„œ **ì¤‘ê°„ ì²˜ë¦¬ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë ˆì´ì–´**ì…ë‹ˆë‹¤.  
ì¦‰, í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì„œë²„ê°€ ì‘ë‹µì„ ë°˜í™˜í•˜ê¸° ì „ì—,  
**ê³µí†µì ì¸ ê¸°ëŠ¥(ë¡œê¹…, ì¸ì¦, ë³´ì•ˆ, ë°ì´í„° ê°€ê³µ ë“±)**ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

---

## ğŸ§© ì¼ë°˜ì ì¸ ë™ì‘ íë¦„

Client â†’ [Middleware] â†’ Route Handler â†’ Response

MiddlewareëŠ” ìš”ì²­ì´ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ì»¨íŠ¸ë¡¤ëŸ¬)ì— ë„ë‹¬í•˜ê¸° ì „,  
ê³µí†µì ì¸ ì‘ì—…ì„ ì²˜ë¦¬í•œ ë’¤ ìš”ì²­ì„ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ê¹ë‹ˆë‹¤.

---

## âš™ï¸ ì£¼ìš” ì—­í• 

| ì—­í•                    | ì„¤ëª…                             |
| ---------------------- | -------------------------------- |
| **ì¸ì¦/ì¸ê°€ ì²˜ë¦¬**     | ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸, ê¶Œí•œ ê²€ì¦      |
| **ë¡œê¹…(Log)**          | ìš”ì²­/ì‘ë‹µ ë¡œê·¸ ì €ì¥              |
| **ì—ëŸ¬ í•¸ë“¤ë§**        | ì˜ˆì™¸ ì²˜ë¦¬ ë° ì—ëŸ¬ ì‘ë‹µ ë³€í™˜      |
| **ìš”ì²­ ë°ì´í„° ì „ì²˜ë¦¬** | Body, Query, Header ê²€ì‚¬ ë° ë³€í™˜ |
| **ì‘ë‹µ ë°ì´í„° í›„ì²˜ë¦¬** | ì‘ë‹µ êµ¬ì¡° í†µì¼, í—¤ë” ì¶”ê°€        |

---

## ğŸŒ í”„ë ˆì„ì›Œí¬ë³„ ì˜ˆì‹œ

### ğŸ§± Express.js

```js
app.use((req, res, next) => {
  console.log(`${req.method} ${req.url}`);
  next(); // ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ ë˜ëŠ” ë¼ìš°í„°ë¡œ ì „ë‹¬
});
```

## âš›ï¸ Next.js

Next.jsì˜ MiddlewareëŠ” middleware.ts íŒŒì¼ë¡œ ì •ì˜ë˜ë©°,
ìš”ì²­ì´ í˜ì´ì§€ë‚˜ API ë¼ìš°íŠ¸ì— ë„ë‹¬í•˜ê¸° ì „ì— ì‹¤í–‰ë©ë‹ˆë‹¤.

```ts
import { NextResponse } from "next/server";
import type { NextRequest } from "next/server";

export function middleware(req: NextRequest) {
  if (!req.cookies.get("auth")) {
    return NextResponse.redirect(new URL("/login", req.url));
  }
  return NextResponse.next();
}
```

## ğŸš€ ì •ë¦¬

| êµ¬ë¶„             | ì„¤ëª…                                                 |
| ---------------- | ---------------------------------------------------- |
| **ìœ„ì¹˜**         | ìš”ì²­(Request)ê³¼ ì‘ë‹µ(Response) ì‚¬ì´                  |
| **ëª©ì **         | ê³µí†µ ë¡œì§(ì¸ì¦, ë¡œê¹…, ë¦¬ë‹¤ì´ë ‰ì…˜ ë“±)ì„ ì¤‘ì•™ì—ì„œ ì²˜ë¦¬ |
| **Next.js íŠ¹ì§•** | Edge Runtimeì—ì„œ ì‹¤í–‰ë˜ì–´ ë¹ ë¥¸ ì‘ë‹µ ì†ë„ ì œê³µ        |

---

ğŸ’¬ **í•œë§ˆë””ë¡œ ìš”ì•½í•˜ìë©´:**  
**MiddlewareëŠ” ìš”ì²­ê³¼ ì‘ë‹µ ì‚¬ì´ì˜ â€œì¤‘ê°„ ê´€ë¦¬ìâ€**ë¡œ,  
ì•± ì „ë°˜ì— ê±¸ì¹œ ê³µí†µ ê¸°ëŠ¥ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í•µì‹¬ êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤.
