## `npm install` vs `npm ci` 차이점

`npm install`과 `npm ci`는 모두 Node.js 프로젝트에서 의존성 패키지를 설치할 때 사용하는 명령어입니다.  
그러나 **사용 목적과 동작 방식에 차이**가 있습니다.

---

### 1. 의존성 버전 처리 방식

- **`npm install`**

  - `package.json`의 **버전 범위(range)** 에 따라 의존성을 설치합니다.
  - 예: `^1.0.0` → `1.0.1`, `1.1.0` 등으로 업데이트될 수 있음.
  - 이로 인해 예기치 않게 다른 버전이 설치될 가능성이 있습니다.

- **`npm ci`**
  - **`package-lock.json`에 정확히 명시된 버전만** 설치합니다.
  - 항상 동일한 의존성 트리를 구성하여 예측 가능한 결과를 보장합니다.

---

### 2. 성능 및 사용 시점

- **`npm install`**

  - 기존 `node_modules`를 유지하면서 변경된 의존성만 추가하거나 업데이트합니다.
  - 의존성 버전 확인, 결정 등의 과정이 필요하여 상대적으로 느릴 수 있습니다.
  - **일반적인 로컬 개발 환경**에서 사용합니다.

- **`npm ci`**
  - 시작 시 기존 `node_modules` 폴더를 **완전히 삭제**하고 재설치합니다.
  - 의존성 결정 과정을 생략하므로 **속도가 빠르고, 일관성**을 보장합니다.
  - **CI/CD 파이프라인, 테스트 환경** 등에서 사용됩니다.

---

### 3. 파일 변경 여부

- **`npm install`**

  - 필요 시 `package-lock.json`을 생성하거나 업데이트합니다.
  - 의존성 트리 변경이 발생할 수 있습니다.

- **`npm ci`**
  - `package-lock.json`을 **절대 수정하지 않음**.
  - `package.json`과 `package-lock.json`이 불일치하면 **오류 발생**.

---

## 요약 비교

| 항목              | `npm install`                 | `npm ci`                           |
| ----------------- | ----------------------------- | ---------------------------------- |
| 버전 결정         | package.json의 버전 범위 사용 | package-lock.json의 고정 버전 사용 |
| node_modules 처리 | 유지하며 필요한 것만 설치     | 전체 삭제 후 새로 설치             |
| package-lock 처리 | 생성/수정 가능                | 절대 수정하지 않음                 |
| 속도              | 상대적으로 느릴 수 있음       | 빠르고 일관성 있음                 |
| 사용 환경         | 로컬 개발                     | CI/CD, 테스트, 자동화              |

---

### 💡 `npm ci`를 로컬에서도 사용할 수 있나요?

가능하지만, 다음 사항을 고려해야 합니다:

- **장점:** 항상 동일한 의존성을 설치하여 개발 환경의 일관성 유지 가능
- **단점:** 설치 속도가 느릴 수 있으며, `node_modules`가 매번 삭제됨

> 팀 단위 개발에서 의존성 차이로 인한 문제를 줄이고 싶다면 로컬에서도 `npm ci` 사용을 고려할 수 있습니다.
