# 리액트의 Batching Update

리액트의 **배칭 업데이트(Batching Update)**는 여러 상태 업데이트를
하나의 리렌더링으로 그룹화하는 최적화 기법입니다.\
이를 통해 불필요한 렌더링을 줄이고 성능을 향상시킬 수 있습니다.

---

## 기본 개념

리액트는 성능 최적화를 위해 여러 `setState` 호출을 일괄 처리(batch)하여
**한 번의 렌더링**으로 실행합니다.

```jsx
function handleClick() {
  setCount((c) => c + 1); // 첫 번째 업데이트
  setFlag((f) => !f); // 두 번째 업데이트
  setName("리액트"); // 세 번째 업데이트
  // 위 세 가지 상태 변경은 배칭되어 단 한 번의 렌더링만 발생
}
```

---

## React 18 이전의 배칭

React 18 이전에는 **리액트 제어 영역**(예: 이벤트 핸들러 내부)에서만
배칭이 적용되었습니다.

```jsx
// React 17에서:
function handleClick() {
  setCount((c) => c + 1); // 이벤트 핸들러 내부 → 배칭 적용됨
  setFlag((f) => !f); // 배칭 적용됨 (한 번의 렌더링)
}

setTimeout(() => {
  setCount((c) => c + 1); // React 외부 → 배칭 적용 안됨
  setFlag((f) => !f); // 배칭 적용 안됨 (두 번의 렌더링 발생)
}, 1000);
```

---

## React 18의 자동 배칭 (Automatic Batching)

React 18부터는 **자동 배칭**이 도입되어 React 외부 환경에서도 배칭이
적용됩니다.

- Promise 내부
- `setTimeout` / `setInterval` 내부
- 네이티브 이벤트 핸들러
- 그 외 모든 비동기 이벤트

즉, 개발자가 별도의 최적화 작업을 하지 않아도 더 효율적인 렌더링이
가능해졌습니다.

```jsx
// React 18에서:
setTimeout(() => {
  setCount((c) => c + 1); // 자동 배칭 적용됨
  setFlag((f) => !f); // 자동 배칭 적용됨 (한 번의 렌더링)
}, 1000);
```

---

## 정리

- **React 17 이전**: 리액트 제어 영역(이벤트 핸들러 내부)에서만 배칭
  적용.\
- **React 18 이후**: 비동기 작업을 포함한 모든 업데이트에 자동 배칭
  적용.\
- 결과적으로 불필요한 리렌더링 감소, 성능 최적화 효과.
