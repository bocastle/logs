# 이벤트 버블링과 캡처링 정리

## 1) 이벤트 전파(Event Propagation)란?

DOM에서 이벤트가 발생하면, 그 이벤트는 **특정 노드에서만 끝나는 것이 아니라 DOM 트리를 따라 이동**합니다.  
이 전파 과정은 크게 **캡처링 → 타깃 → 버블링** 3단계로 이해합니다.

---

## 2) 이벤트 캡처링(Capturing)

- **방향:** `window → document → ... → 부모 → 자식(타깃)`
- **의미:** 최상위 조상에서 시작해 타깃 요소로 “내려오며” 전파되는 단계
- **기본값:** 기본적으로 캡처링 단계에서 핸들러가 실행되지는 않음(옵션으로 활성화)

### 사용 예시(개념)

- 페이지 전체 로깅/트래킹처럼 **부모(상위)에서 먼저 이벤트를 관찰/처리**하고 싶을 때
- 자식에서 stopPropagation을 하더라도, **상위에서 먼저 실행**시키고 싶을 때

---

## 3) 이벤트 버블링(Bubbling)

- **방향:** `타깃(가장 안쪽) → 부모 → ... → document → window`
- **의미:** 이벤트가 타깃에서 시작해 조상으로 “올라가며” 전파되는 단계
- **기본값:** 브라우저는 일반적으로 **버블링 단계**에서 핸들러가 동작하도록 설계

### 사용 예시(이벤트 위임, Event Delegation)

- 동적으로 늘어나는 자식 요소마다 리스너를 달지 않고,
  **부모에 한 번만 리스너를 달아** 자식들의 이벤트를 처리하는 패턴
- 장점: 리스너 수 감소, 관리/성능 측면 유리

---

## 4) addEventListener에서 캡처링 활성화

`addEventListener(type, handler, options)`의 옵션으로 캡처링을 제어할 수 있습니다.

- `capture: true` → 캡처링 단계에서 실행
- 기본값은 `false` → 버블링 단계에서 실행

---

## 5) 버블링/캡처링에서 흔히 생기는 문제

1. **중복 처리**
   - 자식/부모 모두에 리스너가 있으면 한 번의 클릭이 여러 핸들러를 연달아 실행시킴
2. **이벤트 위임 시 타깃 오작동**
   - 부모에서 처리할 때 `event.target`이 예상과 다를 수 있음(실제 클릭된 가장 안쪽 요소)
3. **캡처링 남용 시 불필요한 처리**
   - 상위에서 너무 많은 이벤트를 먼저 처리하면 성능/복잡도가 증가할 수 있음

---

## 6) 전파 제어에 자주 쓰는 메서드 2가지

### 1) `stopPropagation()`

- 이벤트 전파를 **현재 단계에서 중단**시킵니다.
- “부모까지 올라가게(또는 내려가게) 하지 말자”가 목적

### 2) `preventDefault()`

- 링크 이동, 폼 제출 같은 **브라우저 기본 동작을 막는 것**
- 전파를 멈추는 것이 아니라 “기본 동작”을 막는 것이라는 점이 핵심

---

## 7) 핵심 요약

- **캡처링:** 위에서 아래로 내려옴(옵션으로 사용)
- **버블링:** 아래에서 위로 올라감(기본 동작)
- **이벤트 위임은 주로 버블링을 활용**
- 전파 제어: `stopPropagation()`, 기본 동작 제어: `preventDefault()`
